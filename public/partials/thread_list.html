<div ng-include="'partials/thread_search.html'"></div>
<div class="beneath-search threads">
  <div class="thread-list bordered" infinite-scroll="ThreadListCtrl.extendList()" infinite-scroll-distance="1">
    <div class="thread clickable" ng-repeat="thread in ThreadListCtrl.list" ng-click="ThreadListCtrl.threadClicked(thread, $event);" id="{{thread.id}}">
        <div class="actions">
          <a class="btn" ng-show="" ng-click="ThreadListCtrl.archiveClicked(thread, $event);">Archive</a>
          <a class="btn" ng-show="thread.draftIDs.length == 1 && thread.messageIDs.length == 0" ng-click="ThreadListCtrl.deleteClicked(thread, $event)">Delete</a>
        </div>

        <div class="{{thread.tagData | tag_expand}}"><div>
        <in-participant-bubble email="{{(thread.participants | not_me)[0].email}}"></in-participant-bubble>
        <div class="participants">{{thread.participants.slice(0,1) | participants }} ({{thread.messageIDs.length}})</div>
        <div class="date">{{thread.lastMessageDate | timestamp_short}}</div>
        <div class="header"><div class="snippet"><span class="subject">{{thread.subject}}</span> {{thread.snippet}}</div></div>
    </div></div></div>

    <div ng-show="!ThreadListCtrl.list" class="loading-indicator">
      <div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div>
    </div>

    <div ng-show="ThreadListCtrl.list.length == 0" style="text-align:center; padding:140px; color:#ccc;">
      Sorry, no threads matched your criteria.
    </div>

    <div ng-show="ThreadListCtrl.showNoMore()" style="text-align:center; padding:140px; color:#ccc;">
      That's all we've got!
    </div>

  </div>
</div>
